<section id="products" class="product-section">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h3 class="product-heading">{{ section.settings.heading }}</h3>
    {% endif %}

    <div class="product-grid">
      {% for block in section.blocks %}
        {% assign p = block.settings.product %}
        {% if p %}
          <div class="product-card fade-in" onclick="openModal({{ forloop.index0 }})" {{ block.shopify_attributes }}>
            <div class="product-image">
              {% if p.featured_image %}
                <img
                  src="{{ p.featured_image | image_url: width: 1200 }}"
                  alt="{{ p.featured_image.alt
                          | default: p.title
                          | default: p.featured_image.src | split: '/' | last | split: '.' | first
                          | replace: '-', ' ' | replace: '_', ' '
                          | escape }}">
              {% endif %}
              <div class="product-plus-icon">+</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}
.product-heading{margin:10px 0 16px}
.product-section{padding:60px 40px;background:#fff}
.product-grid{
  display:grid;
  gap:20px;
  grid-template-columns:repeat(3,1fr) !important;
}
.product-card{position:relative;overflow:hidden;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1);transition:transform .3s;cursor:pointer;margin:10px}
.product-card:hover{transform:translateY(-5px)}
.product-image{width:100%;height:auto;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;background:#f5f5f5}
.product-image img{width:100%;height:100%;object-fit:cover;transition:transform .3s}
.product-card:hover .product-image img{transform:scale(1.05)}
.product-plus-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50px;height:50px;background:rgba(255,255,255,.9);border:2px solid #333;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:#333;transition:.3s;z-index:3}
.product-card:hover .product-plus-icon{transform:translate(-50%,-50%) scale(1.1)}
@media (max-width:768px){
  .product-grid{grid-template-columns:repeat(2,1fr);}
}
@media (max-width:480px){
  .product-grid{grid-template-columns:1fr;}
}
@media (max-width:768px){.product-grid{grid-template-columns:1fr;gap:15px}}
@media (max-width:1024px) and (min-width:769px){.product-grid{grid-template-columns:repeat(2,1fr)}}
.fade-in{opacity:0;transform:translateY(30px);transition:all .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
</style>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  function showOnScroll(){
    document.querySelectorAll('.fade-in').forEach(el=>{
      const r=el.getBoundingClientRect();
      if(r.top < innerHeight - 50) el.classList.add('visible');
    });
  }
  addEventListener('scroll',showOnScroll); showOnScroll();
});
</script>

{% schema %}
{
  "name": "Product Grid (products)",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Tisso vison in the wild" }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        { "type": "product", "id": "product", "label": "Select product" }
      ]
    }
  ],
  "max_blocks": 24,
  "presets": [{ "name": "Product Grid (products)" }]
}
{% endschema %}